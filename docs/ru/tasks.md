<p align="right"><a href="README.md">К оглавлению</a> | <a href="../en/tasks.md">English version</a> | Русская версия</p>

<img src="https://cloud.githubusercontent.com/assets/7034281/17825068/57fc998c-666e-11e6-8847-9d9b0e958cf8.png" align="right"/>

# Доступные задачи

В основе Yellfy лежит система сборки и задач [Gulp](http://gulpjs.com/) 4-ой версии. Для удобства конечного пользователя все задачи разбиты на максимально возможное число самодостаточных подзадач.




<br/>
## Задача по умолчанию (`gulp`)

Задача, запускающая первичный цикл сборки проекта, слежение за изменениями файлов и сервер на `8000` порту. Во время выполнения задачи не происходит оптимизация ресурсов и тестирование.

**Порядок выполнения:**

  * **Последовательный запуск**
    * Очистка директории сборок
    * Линтинг файлов
    * Генерация спрайта
    * **Параллельный запуск**
      * Синхронизация некомпилируемых файлов
      * Обработка шаблонов
      * Обработка скриптов
      * Обработка стилей
    * Запуск слежения за файлами и сервера




<br/>
## Сборка проекта (`gulp build`)

Запускает полный цикл сборки проекта, включая шаги оптимизации ресурсов. При этом слежение за файлами и сервер не запускаются.

**Порядок выполнения:**

  * **Последовательный запуск**
    * Очистка директории сборок
    * Линтинг файлов
    * Генерация спрайта
    * **Параллельный запуск**
      * Синхронизация некомпилируемых файлов
      * Обработка шаблонов
      * Обработка скриптов
      * Обработка стилей
    * Оптимизация ресурсов




<br/>
## Очистка директории сборок (`gulp clean`)

Очистка директории `build`, содержащей скомпилированные и скопированные файлы.




<br/>
## Синхронизация некомпилируемых файлов (`gulp sync`)

Не все ресурсы проекта должны подвергаться обработке (изображения, txt-файлы и прочие), поэтому для некоторых ресурсов определена односторонняя синхронизация. Это означает, что такие ресурсы будут копироваться в директорию `build` и обновляться лишь в случае их обновления.




<br/>
## Линтинг файлов (`gulp lint`)

Линтинг файлов шаблонов ([pug-lint](https://github.com/pugjs/pug-lint)), стилей ([stylelint](https://github.com/stylelint/stylelint)) и скриптов ([xo](https://github.com/sindresorhus/xo)). Также доступны отдельные задачи для каждого типа файлов:

  * Линтинг шаблогов: `gulp lint-templates`
  * Линтинг стилей: `gulp lint-styles`
  * Линтинг скриптов: `gulp lint-scripts`




<br/>
## Обработка шаблонов (`gulp templates`)

Задача производит компиляюцию файлов шаблонов.




<br/>
## Обработка стилей (`gulp styles`)

Задача проводит обработку файлов стилей, которая включает в себя:

  * Компиляцию less-файлов
  * Попытку исправления известных багов flexbox, используя [postcss-flexbugs-fixes](https://github.com/luisrudge/postcss-flexbugs-fixes)
  * Расстановку браузерных префиксов на основе следующей конфигурации [autoprefixer](https://github.com/postcss/autoprefixer):
    * **Microsoft**
      * `Explorer >= 10`
      * `Edge >= 12`
      * `ExplorerMobile >= 10`
    * **Mozilla**
      * `Firefox >= 30`
    * **Google**
      * `Chrome >= 34`
      * `Android >= 4`
    * **Opera**
      * `Opera >= 12`
    * **Apple**
      * `Safari >= 7`
      * `iOS >= 7`
    * **BlackBerry**
      * `BlackBerry >= 10`




<br/>
## Обработка скриптов (`gulp scripts`)

Задача, обрабатывающая файлы скриптов в несколько шагов:

  * Генерация бандла, используя [Rollup](https://github.com/rollup/rollup)
  * Преобразование ES2015-синтаксиса в синтаксис ES5




<br/>
## Генерация SVG-спрайта (`gulp sprite`)

Генерация SVG-спрайта (symbol).




<br/>
## Оптимизация (`gulp compress`)

Оптимизация файлов стилей, скриптов и изображений. Также доступны отдельные задачи для каждого типа файлов:

  * Оптимизация стилей: `gulp compress-styles`
  * Оптимизация скриптов: `gulp compress-scripts`
  * Оптимизация изображений: `gulp compress-images`




<br/>
## Тестирование (`gulp test`)

Задача, запускающая полный цикл сборки проекта, сборку файлов тестов и сервер на `8001` порту.

**Порядок выполнения:**

  * **Последовательный запуск**
    * **Параллельный запуск**
      * Полный цикл сборки (см. задачу [Сборка проекта](tasks.md#Сборка-проекта-gulp-build))
      * Копирование точки входа тестов `tests.html` в директорию сборок
      * Сборка файлов тестов
        * Генерация бандла, используя [Rollup](https://github.com/rollup/rollup)
        * Преобразование ES2015-синтаксиса в синтаксис ES5
    * Запуск тестового сервера на `8001` порту
